<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M√©todos de pago ‚Äî Finanzas</title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>

<body>
  <header>
    <div><a href="/dashboard.html">üí∏ Finanzas - M√©todos de pago</a></div>
    <div class="nav">
      <a href="/categories.html">Categor√≠as</a>
      <a class="active-link" href="/payment-methods.html">M√©todos de pago</a>
      <a href="/transactions.html">Transacciones</a>
      <a href="/budgets.html">Presupuestos</a>
      <a href="/reports.html">Reportes</a>
			<a href="/learning.html">Aprendizaje</a>
      <button style="background:#64748B;color:#fff;padding:10px 14px;border-radius:10px;" onclick="logout()">Salir</button>
    </div>
  </header>

  <div class="container">
    <h1>M√©todos de pago</h1>

    <div class="grid">
      <!-- Formulario -->
      <div class="card">
        <h2>Nuevo m√©todo</h2>
        <label>Nombre</label>
        <input id="pmNombre" />
        <br />
        <button class="primary" onclick="crear()">Crear</button>
        <div id="msg" class="toast"></div>
      </div>

      <!-- Listado -->
      <div class="card">
        <h2>Listado</h2>
        <table id="tabla">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Activo</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal edici√≥n PM -->
  <div id="pmModalOv" class="modal-overlay">
    <div class="modal">
      <header>
        <h2>Editar m√©todo de pago</h2>
        <button onclick="closePm()">‚úñ</button>
      </header>
      <div>
        <label>Nombre</label>
        <input id="pmEditNombre" />
        <label class="toggle"><input type="checkbox" id="pmEditActivo" /> Activo</label>
        <div id="pmEditMsg" class="toast"></div>
      </div>
      <div class="actions">
        <button type="button" class="secondary" onclick="closePm()">Cancelar</button>
        <button type="button" class="primary" onclick="guardarPm()">Guardar cambios</button>
      </div>
    </div>
  </div>
  <!-- Modal OPCIONES: archivar vs eliminar todo -->
  <div id="pmDelOv" class="modal-overlay" style="display:none">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="pmDelTitle">
      <header>
        <h2 id="pmDelTitle">Acci√≥n sobre m√©todo de pago</h2>
      </header>

      <div class="content">
        <p><strong>Nombre:</strong> <span id="pmDelName">‚Äî</span></p>
        <p><strong>Transacciones asociadas:</strong> <span id="pmDelTxs">0</span></p>
        <p id="pmDelNoteNoUse" class="muted">No hay uso: puedes eliminar sin problemas.</p>
      </div>

      <div class="actions">
        <button type="button" class="primary" onclick="pmConfirm('cascade')">Eliminar TODO</button>
        <button type="button" id="pmActBtn" class="secondary" onclick="pmConfirm('archive')">Archivar (mantener historial)</button>
        <button type="button" class="secondary" onclick="pmCloseDel()">Cancelar</button>
        
      </div>
    </div>
  </div>

  <!-- Modal CONFIRMACI√ìN final -->
  <div id="pmConfirmOv" class="modal-overlay" style="display:none">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="pmConfirmTitle">
      <header>
        <h2 id="pmConfirmTitle">Confirmar</h2>
      </header>

      <div id="pmConfirmBody" class="content"></div>
      <div id="pmConfirmMsg" class="msg" style="display:none"></div>

      <div class="actions">
        <button type="button" class="secondary" onclick="pmCloseConfirm()">Cancelar</button>
        <button type="button" id="pmConfirmOk" class="primary" onclick="pmDoConfirm()">Aceptar</button>
      </div>
    </div>
  </div>



  <!-- Scripts -->
  <script src="/js/ui.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/api.js"></script>
  <script src="/js/common.js"></script>

</body>

</html>